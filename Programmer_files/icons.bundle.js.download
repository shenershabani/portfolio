webpackJsonp([0],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=a(1),l=n(r),i=a(33),c=n(i),o=a(172),s=n(o),u=document.getElementById("jsx-icon-search-bar");c.default.render(l.default.createElement(s.default,{query:u.dataset.query,radicals:u.dataset.radicals,allRadicals:window.gRadicals}),u)},172:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),s=n(o),u=a(173),d=n(u),f=a(174),p=n(f),h=a(175),m=n(h),y=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={radicals:e.radicals?JSON.parse(e.radicals):[],query:e.query},a.handleSubmit=a.handleSubmit.bind(a),a.handleQueryChange=a.handleQueryChange.bind(a),a}return i(t,e),c(t,[{key:"addRadical",value:function(e){$(this.refs.radicalPanel).collapse("hide");var t=this.state.radicals.slice();t.push(e),this.setState({radicals:t,query:""}),"function"==typeof ga&&ga("send","event","icons","radical selected",e)}},{key:"removeRadical",value:function(e){var t=this.state.radicals.slice();t.splice(e,1),this.setState({radicals:t})}},{key:"addRadicalsParamToForm",value:function(e){if(console.log("Adding radicals to search form"),0!=this.state.radicals.length){var t=this.serializeRadicalValues();console.log("Adding "+t);var a="r",n=$("<input>").attr("type","hidden").attr("name",a).val(t);$(e).append($(n))}}},{key:"serializeRadicalValues",value:function(){var e=this.state.radicals,t=e.map(function(e){return e.id});return t.join(", ")}},{key:"handleSubmit",value:function(e){var t=$(".icon-search-field.tt-input").val();return""===$.trim(t)&&0==this.state.radicals.length?($(".icon-search-field.tt-input").focus(),e.preventDefault()):void this.addRadicalsParamToForm(this.refs.searchForm)}},{key:"handleQueryChange",value:function(e){this.setState({query:e.target.value})}},{key:"handleFocus",value:function(){$(this.refs.radicalPanel).collapse("hide")}},{key:"render",value:function(){var e=this,t=this.state.radicals.length>0?"Search":"Search or browse",a=function(){return 0==e.state.radicals?s.default.createElement("h4",{className:"text-center text-muted"},"search by visual element"):s.default.createElement("div",null)};return s.default.createElement("div",{className:"icon-search-bar container"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2",style:{padding:"0"}},s.default.createElement("form",{ref:"searchForm",method:"GET",action:"/icons/search",className:"icon-search-form",onSubmit:this.handleSubmit,acceptCharset:"UTF-8",role:"search"},s.default.createElement("div",{className:"icons-search input-group"},s.default.createElement(d.default,{radicals:this.state.radicals,onClick:function(t){return e.removeRadical(t)}}),s.default.createElement(p.default,{radicalNumber:this.state.radicals.length}),s.default.createElement("input",{ref:"searchField",type:"text",className:"form-control input-lg icon-search-field",value:this.state.query,onChange:this.handleQueryChange,onFocus:function(){return e.handleFocus()},size:"20",maxLength:"300",name:"q",placeholder:t}),s.default.createElement("span",{className:"input-group-btn"},s.default.createElement("button",{className:"btn btn-default btn-lg btn-search",type:"submit"}," ",s.default.createElement("span",{className:"glyphicon glyphicon-search fa-lg"})," ")))),s.default.createElement("div",{id:"radicalPanel",ref:"radicalPanel",className:"collapse radical-panel"},s.default.createElement(a,null),s.default.createElement(m.default,{radicals:this.state.radicals.map(function(e){return e.id}),onClick:function(t){return e.addRadical(t)}})))))}},{key:"componentDidMount",value:function(){var e=this,t=new Bloodhound({name:"typeaheads",remote:{url:"/dummy-set-in-prepare",wildcard:"%QUERY",prepare:function(t,a){var n=e.serializeRadicalValues();return a.url="/icon/suggest?q="+t+(""!==n?"&r="+n:""),a},filter:function(e){return $.map(e.options,function(e){return{value:e}})}},sufficient:10,datumTokenizer:function(e){return e},queryTokenizer:function(e){return e}});t.initialize();var a=$(this.refs.searchField);a.typeahead({minLength:2,highlight:!0},{name:"search-suggestions",displayKey:"value",source:t.ttAdapter(),limit:10});var n=this.refs.searchForm;a.on("typeahead:selected",function(t,a){e.addRadicalsParamToForm(n),n.submit()})}}]),t}(o.Component);t.default=y},173:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),s=n(o),u=function(e){function t(){return r(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),c(t,[{key:"render",value:function(){for(var e=this,t=this.props.radicals,a=[],n=function(n){var r="/resources/radicals/"+t[n].fname+".svg";a[n]=s.default.createElement("span",{className:"label label-default",key:n},s.default.createElement("img",{src:r})," ",s.default.createElement("a",{className:"dismiss-radical",onClick:function(){return e.props.onClick(n)}},"x"))},r=0;r<t.length;r++)n(r);return s.default.createElement("div",{className:"radicals-group input-group-btn",style:{display:"table-cell",width:"1%"}},a)}}]),t}(o.Component);t.default=u},174:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=2,a=e.radicalNumber,n=null;return a>t?i.default.createElement("span",{className:"input-group-btn"}):(n=0==a?i.default.createElement("i",{className:"fa fa-picture-o fa-lg"}):i.default.createElement("i",{className:"fa fa-plus-circle fa-lg text-muted"}),i.default.createElement("span",{className:"input-group-btn"},i.default.createElement("button",{className:"btn btn-default btn-lg btn-radical",type:"button","data-toggle":"collapse",href:"#radicalPanel","aria-expanded":"false"},n)))}Object.defineProperty(t,"__esModule",{value:!0});var l=a(1),i=n(l);t.default=r},175:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(1),s=n(o),u=a(176),d=n(u),f=function(e){function t(e){r(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={radicals:[]},a}return i(t,e),c(t,[{key:"render",value:function(){var e=this.state,t=e.error,a=e.isLoaded;e.items;return t?s.default.createElement("div",null,"Error: ",t.message):a?s.default.createElement(d.default,{radicals:this.state.radicals,onClick:this.props.onClick}):s.default.createElement("div",null,s.default.createElement("i",{className:"fa fa-spinner fa-spin fa-lg fa-fw"}),s.default.createElement("span",{className:"sr-only"},"Loading..."))}},{key:"componentDidUpdate",value:function(e){e.radicals.length!=this.props.radicals.length&&(this.setState({radicals:[],selectedRadicals:this.props.radicals,isLoaded:!1}),this.fetchRadicals(this.props.radicals))}},{key:"componentDidMount",value:function(){this.fetchRadicals(this.props.radicals)}},{key:"fetchRadicals",value:function(e){var t=this,a=e&&e.length>0?"/api/icons/radicalsFor?r[]="+e.join("&r[]="):"/api/icons/radicals";$.ajax({url:a}).done(function(e){t.setState({isLoaded:!0,radicals:e})})}}]),t}(s.default.Component);t.default=f},176:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){for(var t=e.radicals,a=[],n=function(n){var r=t[n].fname;a[n]=c.default.createElement(l,{key:n,name:t[n].name,fname:r,onClick:function(){return e.onClick(t[n])}})},r=0;r<t.length;r++)n(r);return c.default.createElement("div",{className:"row"},a)}function l(e){var t="/resources/radicals/"+e.fname+".svg";return c.default.createElement("div",{className:"icon-pick-holder col-xs-2 col-lg-1",onClick:e.onClick},c.default.createElement("a",{href:"javascript:void(0);",className:"icon-radical",title:e.name},c.default.createElement("img",{src:t,alt:e.name})))}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),c=n(i);t.default=r}});